<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration</title>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Function to populate the dropdown menu
        function populateGradeDropdown() {
            const dropdown = document.getElementById('grade_name');
            
            // Make an AJAX request to the API endpoint
            fetch('http://localhost/voting_system/server/controller/grade/grade_get.php?action=read')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        // Clear existing options
                        dropdown.innerHTML = '';
                        
                        // Add a default placeholder option
                        const placeholderOption = document.createElement('option');
                        placeholderOption.value = '';
                        placeholderOption.text = 'Select a grade';
                        dropdown.appendChild(placeholderOption);

                        // Add new options from the API response
                        data.grades.forEach(grade => {
                            const option = document.createElement('option');
                            option.value = grade.grade_id;
                            option.text = grade.grade_name;
                            dropdown.appendChild(option);
                        });
                    } else {
                        console.error('Failed to retrieve grades:', data.message);
                    }
                })
                .catch(error => console.error('Error fetching grades:', error));
        }

        // Populate the dropdown on page load
        populateGradeDropdown();
    });

</script>
    <link rel="stylesheet" href="register.css">
</head>
<body>
    <div class="container">
        <div class="form-wrapper">
            <h1>Student Registration</h1>
            <form action="../../server/controller/student/register.php" method="POST" enctype="multipart/form-data">
                <div class="form-row">
                    <div class="form-group">
                        <label for="student_name">Student Name</label>
                        <input type="text" id="student_name" name="student_name" required>
                    </div>

                    <div class="form-group">
                        <label for="user_name">Username</label>
                        <input type="text" id="user_name" name="user_name" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" name="address" required>
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="contact_number">Contact Number</label>
                        <input type="tel" id="contact_number" name="contact_number" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="registration_number">Registration Number</label>
                        <input type="text" id="registration_number" name="registration_number" required>
                    </div>

                    <div class="form-group">
                       
                            <label for="grade_name">Grade Name (if applicable):</label>
                    <select id="grade_name" name="grade_id">
                        <!-- Options will be populated here -->
                    </select>
                        
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="guardian">Guardian</label>
                        <input type="text" id="guardian" name="guardian" required>
                    </div>

                    <div class="form-group">
                        <label for="join_date">Join Date</label>
                        <input type="date" id="join_date" name="join_date" required>
                    </div>
                </div>

                <div class="form-row">
                   
                    <div class="form-group">
                        <label for="image">Upload Image (optional)</label>
                        <input type="file" id="image" name="image" accept="image/*">
                    </div>
                </div>

                <div class="form-group-submit">
                    <button type="submit">Register</button>
                </div>
            </form>
        </div>
    </div>
</body>
</html>
